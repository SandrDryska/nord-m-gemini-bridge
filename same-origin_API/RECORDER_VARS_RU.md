# WebRecorder API ‚Äî –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ Storyline

> **–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –≤–µ–±-—Ä–µ–∫–æ—Ä–¥–µ—Ä –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –ò–ò-–º–æ–¥–µ–ª—è–º–∏ –≤ –∫—É—Ä—Å–∞—Ö Storyline**

–≠—Ç–æ—Ç API –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å –≥–æ–ª–æ—Å, –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Ç–µ–∫—Å—Ç –∏ –ø–æ–ª—É—á–∞—Ç—å –æ—Ç–≤–µ—Ç—ã –æ—Ç –ò–ò-–º–æ–¥–µ–ª–µ–π (Gemini, OpenAI, Yandex) –ø—Ä—è–º–æ –∏–∑ –∫—É—Ä—Å–∞ Storyline.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1. **–î–æ–±–∞–≤—å—Ç–µ –≤–µ–±-–æ–±—ä–µ–∫—Ç** —Å–æ —Å—Ç—Ä–∞–Ω–∏—Ü–µ–π `same-origin_API/index.html`
2. **–°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ** –≤ Storyline (—Å–º. —Ä–∞–∑–¥–µ–ª "–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ")
3. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ API** –æ–¥–∏–Ω —Ä–∞–∑ –Ω–∞ —Å–ª–∞–π–¥–µ (—Å–º. `RECORDER_COMMANDS_RU.md`)
4. **–ì–æ—Ç–æ–≤–æ!** –ú–µ–Ω—è–π—Ç–µ `SR_Prompt` –∏ –ø–æ–ª—É—á–∞–π—Ç–µ –æ—Ç–≤–µ—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

## üìã –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ Storyline

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

#### `SR_Prompt` (Text)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –¢–µ–∫—Å—Ç –∑–∞–ø—Ä–æ—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è  
**–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ:** –î–∞, –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –æ—Ç–ø—Ä–∞–≤–∫–∏  
**–ü—Ä–∏–º–µ—Ä:** "–†–∞—Å—Å–∫–∞–∂–∏ –æ –º–∞—à–∏–Ω–Ω–æ–º –æ–±—É—á–µ–Ω–∏–∏"  

> ‚ö†Ô∏è **–í–∞–∂–Ω–æ:** –î–∞–∂–µ –¥–ª—è –≥–æ–ª–æ—Å–æ–≤–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è –Ω–µ–ø—É—Å—Ç–æ–π –ø—Ä–æ–º–ø—Ç

#### `SR_AutoSend` (True/False)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø—Ä–æ–º–ø—Ç–∞  
**–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é:** False  
**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ True –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞  

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Å—Å–∏–∏

#### `SR_SessionId` (Text)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–∏–∞–ª–æ–≥–∞ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏  
**–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ:** –î–∞, –Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –¥–∏–∞–ª–æ–≥–æ–≤  
**–ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è:** `WebRecorder.newSessionId('sr')`  

#### `SR_System` (Text)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç (—Ä–æ–ª—å –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞)  
**–ü—Ä–∏–º–µ—Ä:** "–¢—ã ‚Äî –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏"  

#### `SR_ResetContext` (True/False)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û—á–∏—Å—Ç–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏ –ø–µ—Ä–µ–¥ —Å–ª–µ–¥—É—é—â–∏–º –∑–∞–ø—Ä–æ—Å–æ–º  
**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ True –¥–ª—è —Å–±—Ä–æ—Å–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞  

#### `SR_EndSession` (True/False)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏ –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–π –æ—Ç–ø—Ä–∞–≤–∫–µ  
**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ True –¥–ª—è –æ–∫–æ–Ω—á–∞–Ω–∏—è –¥–∏–∞–ª–æ–≥–∞  

### –†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã

#### `SR_Mode` (Text)
**–í–∞—Ä–∏–∞–Ω—Ç—ã:**
- `text` ‚Äî —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã
- `voice` ‚Äî —Ç–æ–ª—å–∫–æ –≥–æ–ª–æ—Å–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã  
- `mixed` ‚Äî –∞–≤—Ç–æ–≤—ã–±–æ—Ä (–≥–æ–ª–æ—Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–µ–µ)

**–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é:** mixed

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

#### `SR_FunctionUrl` (Text)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** URL –±—ç–∫–µ–Ω–¥-—Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è SCORM Cloud  
**–ü—Ä–∏–º–µ—Ä:** `https://–≤–∞—à-—Å–∞–π—Ç.netlify.app/.netlify/functions/generate`  
**–ö–æ–≥–¥–∞ –Ω—É–∂–Ω–æ:** –ü—Ä–∏ —Ä–∞–∑–º–µ—â–µ–Ω–∏–∏ –∫—É—Ä—Å–∞ –≤–Ω–µ Netlify  

#### `SR_AudioFormat` (Text)
**–í–∞—Ä–∏–∞–Ω—Ç—ã:** `webm` (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è) –∏–ª–∏ `oggopus`  
**–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é:** webm  

#### `SR_Debug` (True/False)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –í–∫–ª—é—á–µ–Ω–∏–µ –æ—Ç–ª–∞–¥–æ—á–Ω—ã—Ö –ª–æ–≥–æ–≤ –≤ –∫–æ–Ω—Å–æ–ª–∏  
**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** True –ø—Ä–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ, False –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ  

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ò–ò-–º–æ–¥–µ–ª–µ–π (—Ç–æ–ª—å–∫–æ Yandex)

#### `SR_ModelName` (Text)
**–ü—Ä–∏–º–µ—Ä:** `yandexgpt-lite`  

#### `SR_ModelUri` (Text)
**–ü—Ä–∏–º–µ—Ä:** `gpt://b1g.../yandexgpt-lite`  

#### `SR_Temperature` (Number)
**–î–∏–∞–ø–∞–∑–æ–Ω:** 0.0 - 1.0  
**–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é:** 0.7  

#### `SR_MaxTokens` (Number)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ –æ—Ç–≤–µ—Ç–∞  
**–ü—Ä–∏–º–µ—Ä:** 1000

## üì§ –í—ã—Ö–æ–¥–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

> –≠—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∑–∞–ø–æ–ª–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ ‚Äî —Å–æ–∑–¥–∞–π—Ç–µ –∏—Ö –≤ Storyline –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

#### `SR_Response` (Text)
**–°–æ–¥–µ—Ä–∂–∏—Ç:** –û—Ç–≤–µ—Ç –ò–ò-–º–æ–¥–µ–ª–∏  
**–ó–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è:** –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏  
**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é  

#### `SR_Transcript` (Text)
**–°–æ–¥–µ—Ä–∂–∏—Ç:** –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è  
**–ó–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è:** –ü—Ä–∏ –≥–æ–ª–æ—Å–æ–≤–æ–π –æ—Ç–ø—Ä–∞–≤–∫–µ (–µ—Å–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è)  
**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –ü–æ–∫–∞–∑ —Ç–æ–≥–æ, —á—Ç–æ "—É—Å–ª—ã—à–∞–ª" –ò–ò  

#### `SR_Status` (Text)
**–°–æ–¥–µ—Ä–∂–∏—Ç:** –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –æ–ø–µ—Ä–∞—Ü–∏–∏  
**–ü—Ä–∏–º–µ—Ä—ã –∑–Ω–∞—á–µ–Ω–∏–π:**
- "Idle" ‚Äî –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ
- "Recording..." ‚Äî –∏–¥—ë—Ç –∑–∞–ø–∏—Å—å
- "Sending text..." ‚Äî –æ—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ–∫—Å—Ç–∞
- "Error: ..." ‚Äî —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –ò–Ω—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ –ø—Ä–æ—Ü–µ—Å—Å–µ

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –ò–ò-–ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã
- **Google Gemini** ‚Äî —Ç–µ–∫—Å—Ç –∏ –≥–æ–ª–æ—Å
- **OpenAI** ‚Äî —Ç–µ–∫—Å—Ç –∏ –≥–æ–ª–æ—Å  
- **Yandex GPT** ‚Äî —Ç–µ–∫—Å—Ç –∏ –≥–æ–ª–æ—Å + —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

### –§–æ—Ä–º–∞—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤
**–¢–µ–∫—Å—Ç:** JSON —Å –ø–æ–ª—è–º–∏ `prompt`, `system`, `sessionId`, –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –º–æ–¥–µ–ª–∏  
**–ì–æ–ª–æ—Å:** multipart/form-data —Å –∞—É–¥–∏–æ—Ñ–∞–π–ª–æ–º –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏  

## üí° –ü–æ–ª–µ–∑–Ω—ã–µ —Å–æ–≤–µ—Ç—ã

### –î–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö
- –°–æ–∑–¥–∞–π—Ç–µ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä: `SR_Prompt`, `SR_AutoSend=True`, `SR_Response`
- –í–∫–ª—é—á–∏—Ç–µ `SR_Debug=True` –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `mixed` —Ä–µ–∂–∏–º ‚Äî –æ–Ω —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π

### –î–ª—è –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ `SR_SessionId` –¥–ª—è –¥–∏–∞–ª–æ–≥–æ–≤
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `SR_System` –¥–ª—è —Ä–æ–ª–µ–≤–æ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è –ò–ò
- –ü—Ä–∏ —Ä–∞–∑–º–µ—â–µ–Ω–∏–∏ –Ω–∞ SCORM Cloud —É–∫–∞–∂–∏—Ç–µ `SR_FunctionUrl`

### –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏
- ‚ùå –ü—É—Å—Ç–æ–π `SR_Prompt` ‚Äî –∑–∞–ø—Ä–æ—Å –Ω–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—Å—è
- ‚ùå `SR_AutoSend=False` ‚Äî –Ω—É–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –≤—Ä—É—á–Ω—É—é
- ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ `SR_Response` ‚Äî –æ—Ç–≤–µ—Ç –Ω–µ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è
- ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π `SR_FunctionUrl` ‚Äî –æ—à–∏–±–∫–∞ 403/404
